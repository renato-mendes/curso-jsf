<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:ui="http://java.sun.com/jsf/facelets"> 


<ui:decorate template="../home.xhtml">
	<ui:define name="head">
		<script>
			function onStatusChange(data) {
				var status = data.status;
				if (status === "begin") { // turn on busy indicator
					alert('Iniciando...');
				} else if (status === "complete") { 
					alert('Processando...');
				} else if (status === "success") {
					alert('Completo!');
				}
			}
		</script>
		
		<title><ui:insert name="title">Cadastro de Livro</ui:insert></title>
		<h:outputStylesheet library="#{livroBean.theme}" name="css/bootstrap.css" />
	</ui:define>
	<ui:define name="conteudo">
		
	<h:form prependId="false">
		<h:commandButton action="#{livroBean.switchTheme}" value="Alterar Tema" immediate="true"/>
		<h:panelGrid columns="3">
			<h:outputLabel for="isbn" value="#{msg['livro.isbn']}:" />
			<input type="text" jsfc="h:inputText" id="isbn" value="#{livroBean.livro.isbn}"/>
			<h:message for="isbn" />

			<h:outputLabel for="titulo" value="#{msg.titulo}:" />
			<h:inputText id="titulo" value="#{livroBean.livro.titulo}"/>
			<h:message for="titulo" />

			<h:outputLabel for="autor" value="#{msg.autor}:" />
			<h:inputText id="autor" value="#{livroBean.livro.autor}"/>
			<h:message for="autor" />

			<h:outputLabel for="editora" value="#{msg.editora}:" />
			<h:selectOneMenu id="editora" value="#{livroBean.livro.editora}">
				<f:selectItems value="#{livroBean.editoras}"
					var="ed" itemLabel="#{ed.nome}" itemValue="#{ed}"/>
			</h:selectOneMenu>
			<h:message for="editora" errorStyle="color: red;"/>

			<h:outputLabel for="dataPub" value="#{msg['data.publicacao']}:" />
			<h:inputText id="dataPub" value="#{livroBean.livro.dataPublicacao}"
				label="#{msg['data.publicacao']}">
				<f:convertDateTime locale="pt_BR"/>
			</h:inputText>
			<h:message for="dataPub"/>

			<h:outputLabel for="preco" value="#{msg.preco}:" />
			<h:inputText id="preco" value="#{livroBean.livro.preco}" >
				<f:convertNumber locale="#{msg['locale.default']}"/>
			</h:inputText>
			<h:message for="preco"/>

			<h:commandButton action="#{livroBean.cadastrar}" value="#{msg['cadastrar']}">
				<f:ajax execute="@form" render="@all" onevent="onStatusChange"/>
			</h:commandButton>
			<h:commandButton value="#{msg.cancelar}" action="listar" immediate="true"/>
		</h:panelGrid>
		<h:messages id="msgs"/>
	</h:form>
	</ui:define>
</ui:decorate>
</html>